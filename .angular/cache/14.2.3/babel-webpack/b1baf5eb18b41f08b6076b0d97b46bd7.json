{"ast":null,"code":"import { moveItemInArray } from '@angular/cdk/drag-drop';\nimport { ActivatedRoute } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/tasks.service\";\nimport * as i2 from \"src/app/services/modal.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/services/columns.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/cdk/scrolling\";\nimport * as i7 from \"@angular/cdk/drag-drop\";\nimport * as i8 from \"../column-modal/column-modal.component\";\nimport * as i9 from \"../tasks-modal/tasks-modal.component\";\nimport * as i10 from \"../tasks/tasks.component\";\n\nfunction ColumnComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"p\", 6);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ColumnComponent_div_4_Template_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const column_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.openTaskModal(column_r1._id));\n    });\n    i0.ɵɵtext(4, \"Create Task \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"app-tasks\", 8);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const column_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", column_r1.title, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"boardId\", ctx_r0.boardsId)(\"columnId\", column_r1._id);\n  }\n}\n\nexport let ColumnComponent = /*#__PURE__*/(() => {\n  class ColumnComponent {\n    constructor(tasksService, modal, route, columnService) {\n      this.tasksService = tasksService;\n      this.modal = modal;\n      this.route = route;\n      this.columnService = columnService;\n    }\n\n    ngOnInit() {\n      this.boardsId = this.route.snapshot.params['boardsId'];\n      this.getColumns();\n    }\n\n    drop(event) {\n      moveItemInArray(this.columns, event.previousIndex, event.currentIndex);\n      this.updateColumnSet();\n    }\n\n    openModal() {\n      this.modal.toggleModal('addColumn');\n    }\n\n    openTaskModal(columnId) {\n      this.modal.toggleModal('addTasks');\n      this.modal.temp.next(columnId);\n    }\n\n    getColumns() {\n      this.columnService.getColumns(this.boardsId);\n      this.columnService.columns.subscribe(col => {\n        if (col) {\n          this.columns = col.sort((a, b) => a.order > b.order ? 1 : -1);\n        }\n      });\n    }\n\n    updateColumnSet() {\n      const updatedColumns = this.columns.map((col, index) => {\n        col.order = ++index;\n        return {\n          order: col.order,\n          _id: col._id\n        };\n      });\n      this.columnService.updateColumnSet(updatedColumns);\n    }\n\n  }\n\n  ColumnComponent.ɵfac = function ColumnComponent_Factory(t) {\n    return new (t || ColumnComponent)(i0.ɵɵdirectiveInject(i1.TasksService), i0.ɵɵdirectiveInject(i2.ModalService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.ColumnsService));\n  };\n\n  ColumnComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ColumnComponent,\n    selectors: [[\"app-column\"]],\n    decls: 7,\n    vars: 3,\n    consts: [[1, \"flex\", \"ml-auto\", \"mr-auto\", \"justify-center\", \"items-center\", \"border\", \"cursor-pointer\", \"opacity-70\", \"hover:opacity-100\", \"border-dotted\", \"text-center\", \"mt-10\", \"mx-20\", \"py-4\", \"w-1/5\", 3, \"click\"], [\"cdkScrollable\", \"\", 1, \"wrapper\"], [\"cdkDropList\", \"\", \"cdkDropListOrientation\", \"horizontal\", 1, \"example-list\", \"px-20\", \"pt-10\", \"mt-10\", \"flex\", \"gap-4\", 3, \"cdkDropListDropped\"], [\"class\", \"example-box item text-center example-box rounded-lg\", \"cdkDrag\", \"\", 4, \"ngFor\", \"ngForOf\"], [3, \"boardsId\"], [\"cdkDrag\", \"\", 1, \"example-box\", \"item\", \"text-center\", \"example-box\", \"rounded-lg\"], [1, \"mt-6\"], [1, \"task\", \"text-white\", \"mt-6\", \"py-3\", \"shadow-lg\", \"border\", \"cursor-pointer\", \"opacity-70\", \"hover:opacity-100\", \"border-dotted\", \"text-center\", \"w-4/5\", 3, \"click\"], [1, \"tasks\", 3, \"boardId\", \"columnId\"]],\n    template: function ColumnComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"button\", 0);\n        i0.ɵɵlistener(\"click\", function ColumnComponent_Template_button_click_0_listener() {\n          return ctx.openModal();\n        });\n        i0.ɵɵtext(1, \"Create New Column\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 1)(3, \"div\", 2);\n        i0.ɵɵlistener(\"cdkDropListDropped\", function ColumnComponent_Template_div_cdkDropListDropped_3_listener($event) {\n          return ctx.drop($event);\n        });\n        i0.ɵɵtemplate(4, ColumnComponent_div_4_Template, 6, 3, \"div\", 3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(5, \"app-column-modal\", 4)(6, \"app-tasks-modal\", 4);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.columns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"boardsId\", ctx.boardsId);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"boardsId\", ctx.boardsId);\n      }\n    },\n    dependencies: [i5.NgForOf, i6.CdkScrollable, i7.CdkDropList, i7.CdkDrag, i8.ColumnModalComponent, i9.TasksModalComponent, i10.TasksComponent],\n    styles: [\".wrapper[_ngcontent-%COMP%]{overflow-x:auto;display:flex;padding-bottom:50px}.task[_ngcontent-%COMP%]{background-color:#161d31}.tasks[_ngcontent-%COMP%]{width:83%;padding-left:4px}.example-box[_ngcontent-%COMP%]{width:300px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:column;min-height:350px;align-items:center;box-sizing:border-box;background:white;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}\"]\n  });\n  return ColumnComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}